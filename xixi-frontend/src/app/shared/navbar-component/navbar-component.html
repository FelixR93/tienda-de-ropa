<nav class="navbar">
  <div class="navbar-inner">
    <!-- Logo -->
    <a
      routerLink="/"
      class="logo"
      (click)="isMenuOpen = false"
    >
      <span class="logo-mark">XI</span>
      <span class="logo-text">XI</span>
    </a>

    <!-- Links principales (desktop + mobile cuando isMenuOpen = true) -->
    <div class="nav-links" [class.open]="isMenuOpen">
      <a
        routerLink="/"
        routerLinkActive="active"
        (click)="isMenuOpen = false"
      >
        Inicio
      </a>

      <a
        routerLink="/products"
        routerLinkActive="active"
        (click)="isMenuOpen = false"
      >
        Productos
      </a>

      <!-- Bloque de categorÃ­as -->
      <div
        class="nav-categories"
        *ngIf="categories && categories.length > 0"
      >
        <span class="nav-categories-label">
          CategorÃ­as:
        </span>

        <a
          *ngFor="let category of categories"
          [routerLink]="['/category', category._id]"
          routerLinkActive="active"
          (click)="isMenuOpen = false"
        >
          {{ category.name }}
        </a>
      </div>

      <!-- Link admin solo para ADMIN -->
      <a
        *ngIf="isAdmin()"
        routerLink="/admin"
        routerLinkActive="active"
        (click)="isMenuOpen = false"
      >
        Panel admin
      </a>
    </div>

    <!-- Lado derecho -->
    <div class="nav-right">
      <!-- Carrito -->
      <a
        routerLink="/cart"
        class="cart"
        (click)="isMenuOpen = false"
      >
        <span class="cart-icon">ðŸ›’</span>
        <span class="cart-count" *ngIf="cartCount > 0">
          {{ cartCount }}
        </span>
      </a>

      <!-- Usuario logueado -->
      <div
        class="user"
        *ngIf="currentUser; else authLinks"
      >
        <div class="user-info">
          <span class="user-greeting">Hola,</span>
          <span class="user-name">{{ currentUser.name }}</span>
        </div>

        <a
          routerLink="/my-orders"
          class="btn-link secondary"
          (click)="isMenuOpen = false"
        >
          Mis pedidos
        </a>

        <button
          type="button"
          class="btn-link danger"
          (click)="logout()"
        >
          Cerrar sesiÃ³n
        </button>
      </div>

      <!-- Invitado (no logueado) -->
      <ng-template #authLinks>
        <div class="auth-links">
          <a
            routerLink="/login"
            routerLinkActive="active"
            (click)="isMenuOpen = false"
          >
            Iniciar sesiÃ³n
          </a>
          <a
            routerLink="/register"
            class="btn-primary"
            (click)="isMenuOpen = false"
          >
            Registrarse
          </a>
        </div>
      </ng-template>

      <!-- BotÃ³n hamburguesa (mobile) -->
      <button
        class="menu-toggle"
        type="button"
        (click)="toggleMenu()"
      >
        <span></span>
        <span></span>
      </button>
    </div>
  </div>
</nav>
